# 残タスク サマリー

## 概要
このドキュメントは、nari-noteプロジェクトの未実装機能の概要をまとめたものです。
詳細は [remaining-tasks.md](./remaining-tasks.md) を参照してください。

---

## 実装状況の概要

### ✅ 実装済み（約60%完了）
- 基本的な認証機能（メール/パスワード）
- 記事のCRUD操作
- いいね機能
- タグ機能
- 下書き機能
- ユーザープロフィール機能
- 記事一覧表示

### ❌ 未実装（約40%残り）
- Google OAuth認証
- 検索機能
- フォロー機能
- 通知機能
- 棋譜・盤面機能
- ページネーション
- コメント機能

---

## 優先順位別タスク

### 🔴 最優先（フェーズ1: MVP完成のため）

| No | 機能 | 工数目安 | 重要度 |
|----|------|---------|--------|
| 1 | **検索機能** | 1週間 | ⭐⭐⭐⭐⭐ |
| 2 | **フォロー機能** | 1週間 | ⭐⭐⭐⭐⭐ |
| 3 | **通知機能** | 1週間 | ⭐⭐⭐⭐⭐ |
| 4 | **ログイン要求機能** | 2日 | ⭐⭐⭐⭐ |
| 5 | **Google OAuth認証** | 4日 | ⭐⭐⭐⭐ |

**フェーズ1合計:** 約3-4週間

---

### 🟡 重要（フェーズ2）

| No | 機能 | 工数目安 | 重要度 |
|----|------|---------|--------|
| 6 | **ページネーション** | 3日 | ⭐⭐⭐⭐ |
| 7 | **記事編集の高度な機能** | 4日 | ⭐⭐⭐⭐ |
| 8 | **プロフィール画像のアップロード** | 5日 | ⭐⭐⭐ |
| 9 | **UIメッセージ** | 2日 | ⭐⭐⭐ |
| 10 | **パスワードリセット機能** | 4日 | ⭐⭐⭐ |

**フェーズ2合計:** 約2-3週間

---

### 🟢 将棋特有の機能（フェーズ3）

| No | 機能 | 工数目安 | 重要度 |
|----|------|---------|--------|
| 11 | **棋譜機能** | 1.5週間 | ⭐⭐⭐⭐ |
| 12 | **盤面フォーマット挿入機能** | 3日 | ⭐⭐⭐ |

**フェーズ3合計:** 約2-3週間

---

### 🔵 追加機能（フェーズ4）

| No | 機能 | 工数目安 | 重要度 |
|----|------|---------|--------|
| 13 | **マイページ機能** | 2日 | ⭐⭐ |
| 14 | **下書き検索機能** | 2日 | ⭐⭐ |
| 15 | **投稿済み記事タブ** | 1日 | ⭐⭐ |
| 16 | **タグタイムライン拡張** | 2日 | ⭐⭐ |
| 17 | **コメント機能** | 4日 | ⭐ |

**フェーズ4合計:** 約2週間

---

## 機能別詳細

### 1. 検索機能 🔴
**仕様:** `spec/search.spec`, `spec/top.spec`

**実装内容:**
- 検索ボックス（ヘッダー）
- 検索結果ページ
- 記事のタイトル・本文検索
- リアルタイム検索
- サジェスト機能

**影響範囲:**
- バックエンド: SearchController, SearchService
- フロントエンド: Header, search/page.tsx

---

### 2. フォロー機能 🔴
**仕様:** `spec/profile.spec`, `spec/my-page.spec`

**実装内容:**
- フォロー/フォロー解除ボタン
- フォロー/フォロワー数の表示
- フォロー/フォロワー一覧モーダル
- フォロー関連API

**影響範囲:**
- バックエンド: FollowController, FollowService
- フロントエンド: users/[id]/page.tsx

**データベース:** ✅ Followエンティティ存在

---

### 3. 通知機能 🔴
**仕様:** `spec/notification.spec`, `spec/my-page.spec`

**実装内容:**
- 通知アイコン（ヘッダー）
- 未読バッジ
- 通知ドロップダウン
- 通知一覧ページ
- フォローユーザーの記事投稿通知
- 既読管理

**影響範囲:**
- バックエンド: NotificationController, NotificationService
- フロントエンド: Header, notifications/page.tsx

**データベース:** ✅ Notificationエンティティ存在

---

### 4. Google OAuth認証 🔴
**仕様:** `spec/signin.spec`, `spec/signup.spec`

**実装内容:**
- Googleサインイン/サインアップボタン
- Google OAuth 2.0統合
- 初回認証時のアカウント自動作成
- 認証エラーハンドリング

**影響範囲:**
- バックエンド: AuthController, GoogleAuthService
- フロントエンド: login/page.tsx, signup/page.tsx

**必要な準備:**
- Google Cloud Consoleでの設定
- OAuth認証情報の取得

---

### 5. 棋譜機能 🟢
**仕様:** `spec/article.spec`, `spec/article-edit.spec`

**実装内容:**
- 棋譜の表示・再生
- 棋譜フォーマットの挿入
- 棋譜再生コントロール
- 盤面のレンダリング

**影響範囲:**
- フロントエンド: 記事詳細ページ、記事編集ページ

**必要な準備:**
- 棋譜ライブラリ（Kifu for JS等）の選定
- 棋譜データ形式の定義

---

### 6. ページネーション 🟡
**仕様:** 複数のspecファイル

**実装箇所:**
- トップページ（記事一覧）
- 検索結果
- タグタイムライン
- 下書き一覧
- 通知一覧

**1ページあたり:** 20件

**影響範囲:**
- バックエンド: 各種取得API（limit, offset対応）
- フロントエンド: ページネーションコンポーネント

---

### 7. プロフィール画像のアップロード 🟡
**仕様:** `spec/profile-edit.spec`

**実装内容:**
- 画像ファイルのアップロード
- 画像プレビュー
- 画像バリデーション（形式、サイズ5MB以下）
- 画像削除機能

**影響範囲:**
- バックエンド: 画像アップロードAPI、ストレージ統合
- フロントエンド: settings/profile/page.tsx

**現状:** TODO コメントあり（ProfileEditPage.tsx:125）

**必要な準備:**
- 画像ストレージサービスの選定（AWS S3、Cloudinary等）

---

### 8. パスワードリセット機能 🟡
**仕様:** `spec/signin.spec`

**実装内容:**
- パスワード忘れリンク
- パスワードリセットページ
- メール送信機能
- リセットトークンの管理

**影響範囲:**
- バックエンド: AuthController, PasswordResetService, メール送信
- フロントエンド: password-reset/page.tsx

**必要な準備:**
- メール送信サービスの選定（SendGrid、AWS SES等）

---

## 技術的負債

### 高優先度
- [ ] **テストの追加**
  - バックエンドのユニットテスト
  - バックエンドの統合テスト
  - フロントエンドのコンポーネントテスト
  - E2Eテスト

### 中優先度
- [ ] **CI/CDの改善**
  - 自動テストの実行
  - 自動デプロイメント
  - コードカバレッジの測定

- [ ] **セキュリティ強化**
  - CSRF対策
  - XSS対策の強化
  - レート制限の実装

- [ ] **監視とログ**
  - エラーログの集約（Sentry等）
  - アプリケーション監視

### 低優先度
- [ ] **パフォーマンス最適化**
  - 画像の最適化とCDN
  - データベースクエリの最適化
  - フロントエンドのバンドルサイズ削減

---

## 工数見積もり

| フェーズ | 期間 | 内容 |
|---------|------|------|
| フェーズ1 | 3-4週間 | 必須機能（検索、フォロー、通知等） |
| フェーズ2 | 2-3週間 | 重要な機能（ページネーション、画像等） |
| フェーズ3 | 2-3週間 | 将棋特有の機能（棋譜、盤面） |
| フェーズ4 | 2週間 | 追加機能（マイページ等） |
| **合計** | **9-12週間** | |

---

## 注意事項

### コメント機能について
**矛盾:** 仕様では「コメント機能は無し」と記載されているが、`spec/tag-timeline.spec`で「各記事のコメント数が表示される」と言及されています。

**対応:** 仕様の確認が必要です。

### 実装済みだが要確認の項目
- [ ] 記事一覧での投稿日・いいね数の表示（仕様では必要だが未実装の可能性）
- [ ] 各種成功/失敗メッセージの表示（部分的に実装されているが要確認）

---

## 次のアクション

### 即座に実施すべきこと
1. ✅ 残タスクリストの作成（完了）
2. ⬜ 関係者でのタスクレビュー
3. ⬜ 優先順位の最終決定
4. ⬜ コメント機能の仕様確認

### 開発開始前に必要なこと
1. ⬜ スプリント計画の作成
2. ⬜ 各機能のIssue/チケット作成
3. ⬜ 外部サービスの準備
   - Google Cloud Console設定
   - メール送信サービス選定
   - 画像ストレージサービス選定
   - 棋譜ライブラリ選定

### 推奨される開発順序
1. **Week 1-2:** 検索機能
2. **Week 3:** フォロー機能
3. **Week 4:** 通知機能
4. **Week 5:** Google OAuth + ページネーション
5. **Week 6-7:** 記事編集機能強化 + 画像アップロード
6. **Week 8-10:** 棋譜・盤面機能
7. **Week 11-12:** 残りの追加機能 + テスト

---

*最終更新: 2026年1月16日*
