# 残タスク一覧

このドキュメントは、spec/ディレクトリの仕様ファイルと現在の実装状況を比較し、未実装の機能をリストアップしたものです。

## 実装済み機能の概要

### バックエンド
- ✅ 認証機能（サインアップ、サインイン）
- ✅ 記事の基本CRUD操作
- ✅ 記事のいいね機能
- ✅ ユーザープロフィール取得・更新
- ✅ 著者別記事取得
- ✅ タグ別記事取得
- ✅ 下書き記事取得

### フロントエンド
- ✅ トップページ（記事一覧表示）
- ✅ サインアップページ
- ✅ サインインページ
- ✅ 記事詳細ページ
- ✅ 記事編集/新規作成ページ
- ✅ 下書き一覧ページ
- ✅ プロフィール編集ページ
- ✅ ユーザープロフィールページ
- ✅ タグタイムラインページ

## 未実装機能一覧

### 1. 認証機能関連

#### 1.1 Google OAuth認証（優先度: 高）
**仕様:** `spec/signin.spec`, `spec/signup.spec`

**未実装項目:**
- [ ] Googleでサインインボタンの実装
- [ ] Googleでサインアップボタンの実装
- [ ] Google OAuth 2.0の統合
- [ ] 初回Google認証時のアカウント自動作成
- [ ] 既存Google認証ユーザーのログイン処理
- [ ] Google認証キャンセル時の処理
- [ ] Google認証失敗時のエラーハンドリング

**影響範囲:**
- バックエンド: 新規AuthControllerエンドポイント、GoogleAuthService
- フロントエンド: login/page.tsx, signup/page.tsx

**実装に必要な作業:**
1. Google Cloud Consoleでプロジェクト設定とOAuth認証情報の取得
2. バックエンドにGoogle OAuth SDKを統合
3. `/api/auth/google` エンドポイントの実装
4. フロントエンドにGoogle認証ボタンとOAuthフローの実装

---

#### 1.2 パスワードリセット機能（優先度: 中）
**仕様:** `spec/signin.spec`

**未実装項目:**
- [ ] パスワード忘れのリンク実装
- [ ] パスワードリセットページの作成
- [ ] パスワードリセット用メール送信機能
- [ ] パスワードリセットトークンの生成と管理
- [ ] パスワードリセット実行API

**影響範囲:**
- バックエンド: 新規AuthControllerエンドポイント、PasswordResetService、メール送信機能
- フロントエンド: password-reset/page.tsx, password-reset/confirm/page.tsx

**実装に必要な作業:**
1. メール送信サービス（SendGrid、AWS SES等）の統合
2. パスワードリセットトークンの生成・検証ロジック
3. パスワードリセットAPI（リクエスト、確認、実行）
4. フロントエンドのパスワードリセットフロー

---

#### 1.3 ログイン済みユーザーのリダイレクト（優先度: 中）
**仕様:** `spec/signin.spec`, `spec/signup.spec`

**未実装項目:**
- [ ] ログイン状態でサインインページにアクセスした際のリダイレクト
- [ ] ログイン状態でサインアップページにアクセスした際のリダイレクト

**影響範囲:**
- フロントエンド: login/page.tsx, signup/page.tsx

---

### 2. 記事機能関連

#### 2.1 棋譜機能（優先度: 中）
**仕様:** `spec/article.spec`, `spec/article-edit.spec`

**未実装項目:**
- [ ] 記事に棋譜が含まれている場合の表示
- [ ] 棋譜の再生機能
- [ ] 棋譜再生ボタン
- [ ] 棋譜フォーマットの挿入（編集画面）
- [ ] 棋譜の最初の盤面のレンダリング
- [ ] 棋譜の再生コントロール

**影響範囲:**
- フロントエンド: 記事詳細ページ、記事編集ページ
- 将棋ライブラリ（例: Kifu for JS）の統合が必要

**実装に必要な作業:**
1. 棋譜ライブラリ（Kifu for JS等）の選定と統合
2. 棋譜データ形式の定義（KIF、CSA等）
3. 棋譜再生コンポーネントの実装
4. 記事本文への棋譜埋め込みフォーマットの定義
5. 棋譜パーサーの実装

---

#### 2.2 盤面フォーマット挿入機能（優先度: 中）
**仕様:** `spec/article-edit.spec`

**未実装項目:**
- [ ] 本文テキストボックスで「/」入力時の挿入メニュー表示
- [ ] 挿入メニューから盤面を選択
- [ ] 盤面フォーマットの本文への挿入
- [ ] プレビューでの盤面のレンダリング

**影響範囲:**
- フロントエンド: 記事編集ページ

**実装に必要な作業:**
1. スラッシュコマンド（/）のハンドリング
2. 挿入メニューUIコンポーネント
3. 盤面フォーマットの定義
4. 盤面レンダリングコンポーネント

---

#### 2.3 記事編集の高度な機能（優先度: 中）
**仕様:** `spec/article-edit.spec`

**未実装項目:**
- [ ] 文字数カウントの表示
- [ ] 文字数上限（50,000文字）超過時の警告表示
- [ ] 文字数超過時の下書き保存/投稿ブロック
- [ ] ページを離れる際の確認アラート
- [ ] 編集内容の自動保存機能

**影響範囲:**
- フロントエンド: 記事編集ページ（articles/[id]/edit/page.tsx, articles/new/page.tsx）

**実装に必要な作業:**
1. 文字数カウントロジック
2. beforeunloadイベントのハンドリング
3. 自動保存機能（一定時間ごとに下書き保存）
4. バリデーションロジック

---

#### 2.4 下書き機能の拡張（優先度: 低）
**仕様:** `spec/article-list.spec`

**未実装項目:**
- [ ] 下書きの検索機能
- [ ] 投稿済み記事タブの実装
- [ ] 投稿済み記事タブでの記事一覧表示

**影響範囲:**
- バックエンド: 下書き検索API、投稿済み記事取得API
- フロントエンド: articles/drafts/page.tsx

**実装に必要な作業:**
1. 下書き検索APIの実装
2. 投稿済み記事取得APIの実装（既存のGetArticlesByAuthorを活用可能）
3. タブUIコンポーネントの実装
4. 検索UIの実装

---

#### 2.5 ログイン要求機能（優先度: 高）
**仕様:** `spec/article.spec`, `spec/article-edit.spec`

**未実装項目:**
- [ ] 未ログイン時のいいねボタン押下でのモーダル表示
- [ ] ログインページへの遷移モーダル
- [ ] 未ログイン時の記事編集アクセスのリダイレクト

**影響範囲:**
- フロントエンド: 記事詳細ページ、記事編集ページ

---

### 3. ユーザープロフィール機能関連

#### 3.1 フォロー機能（優先度: 高）
**仕様:** `spec/profile.spec`, `spec/my-page.spec`

**未実装項目:**
- [ ] フォローボタンの実装
- [ ] フォロー解除ボタンの実装
- [ ] フォロー/フォロワー数の表示
- [ ] フォロー一覧モーダル
- [ ] フォロワー一覧モーダル
- [ ] フォロー/フォロー解除API

**影響範囲:**
- バックエンド: FollowController、FollowService、FollowRepository
- フロントエンド: users/[id]/page.tsx

**データベース:**
- ✅ Followエンティティは既に存在

**実装に必要な作業:**
1. バックエンドのフォロー/フォロー解除API実装
2. フォロー一覧・フォロワー一覧取得API実装
3. フロントエンドのフォローボタンコンポーネント
4. フォロー/フォロワー一覧モーダルコンポーネント

---

#### 3.2 プロフィール画像のアップロード（優先度: 中）
**仕様:** `spec/profile-edit.spec`

**未実装項目:**
- [ ] 画像ファイルのアップロード処理（現在TODOコメント）
- [ ] 画像のプレビュー表示
- [ ] 画像ファイルのバリデーション（形式、サイズ）
- [ ] プロフィール画像の削除機能

**影響範囲:**
- バックエンド: 画像アップロードエンドポイント、ストレージ統合
- フロントエンド: settings/profile/page.tsx

**実装に必要な作業:**
1. 画像ストレージサービスの選定（AWS S3、Cloudinary等）
2. 画像アップロードAPI実装
3. 画像リサイズ・最適化処理
4. フロントエンドの画像アップロードフロー
5. 画像削除API実装

---

#### 3.3 プロフィール編集の高度な機能（優先度: 低）
**仕様:** `spec/profile-edit.spec`

**未実装項目:**
- [ ] 編集キャンセル時の確認モーダル
- [ ] 画像削除時の確認モーダル

**影響範囲:**
- フロントエンド: settings/profile/page.tsx

---

### 4. 通知機能（優先度: 高）

**仕様:** `spec/notification.spec`, `spec/my-page.spec`

**未実装項目:**
- [ ] 通知アイコンの実装
- [ ] 未読通知のバッジ表示
- [ ] 通知一覧ドロップダウン
- [ ] 通知一覧ページ
- [ ] フォローユーザーの記事投稿通知
- [ ] 通知の既読機能
- [ ] すべての通知を既読にする機能
- [ ] 通知作成API
- [ ] 通知取得API
- [ ] 通知既読API

**影響範囲:**
- バックエンド: NotificationController、NotificationService、NotificationRepository
- フロントエンド: Header（通知アイコン）、notifications/page.tsx

**データベース:**
- ✅ Notificationエンティティは既に存在

**実装に必要な作業:**
1. 通知作成・取得・既読APIの実装
2. 記事投稿時の通知生成ロジック（フォロワーへの通知）
3. 通知アイコンコンポーネント
4. 通知ドロップダウンコンポーネント
5. 通知一覧ページ
6. リアルタイム通知（WebSocket/SSE、優先度低）

---

### 5. 検索機能（優先度: 高）

**仕様:** `spec/search.spec`, `spec/top.spec`

**未実装項目:**
- [ ] 検索ボックスの実装
- [ ] 検索結果ページ
- [ ] リアルタイム検索結果更新
- [ ] サジェスト機能（関連キーワード、人気タグ）
- [ ] 記事検索API（タイトル・本文）

**影響範囲:**
- バックエンド: SearchController、SearchService
- フロントエンド: Header（検索ボックス）、search/page.tsx

**実装に必要な作業:**
1. 記事検索API実装（全文検索）
2. 検索サジェストAPI実装
3. 検索ボックスコンポーネント
4. 検索結果ページ
5. 検索結果のページネーション
6. 全文検索エンジンの統合（PostgreSQL全文検索 or Elasticsearch、優先度低）

---

### 6. マイページ機能（優先度: 中）

**仕様:** `spec/my-page.spec`

**未実装項目:**
- [ ] マイページの実装
- [ ] 自分の記事一覧の表示
- [ ] 未ログイン時のサインインページへのリダイレクト

**影響範囲:**
- フロントエンド: my-page/page.tsx（新規作成）

**実装に必要な作業:**
1. マイページルートの作成
2. 自分のプロフィール情報の表示
3. 自分の記事一覧の表示（既存のGetArticlesByAuthorを活用）
4. 認証チェック

---

### 7. ページネーション機能（優先度: 中）

**仕様:** 複数のspecファイルで言及

**未実装項目:**
- [ ] トップページの記事一覧ページネーション（20件単位）
- [ ] 検索結果のページネーション（20件単位）
- [ ] タグタイムラインのページネーション（20件単位）
- [ ] 下書き一覧のページネーション（20件単位）
- [ ] 通知一覧のページネーション（20件単位）

**影響範囲:**
- バックエンド: 各種取得APIへのページネーション対応（limit, offset）
- フロントエンド: ページネーションコンポーネントの実装

**実装に必要な作業:**
1. ページネーションコンポーネントの作成
2. 各APIへのlimit/offsetパラメータの追加
3. TanStack Query の usePagination の活用
4. 無限スクロールの検討（優先度低）

---

### 8. コメント機能（優先度: 低）

**仕様:** `spec/tag-timeline.spec`で言及（「各記事のコメント数が表示される」）

**未実装項目:**
- [ ] コメント投稿機能
- [ ] コメント一覧表示
- [ ] コメント削除機能
- [ ] コメント数の表示

**影響範囲:**
- バックエンド: CommentController、CommentService、CommentRepository
- フロントエンド: 記事詳細ページ

**データベース:**
- ✅ Commentエンティティは既に存在

**実装に必要な作業:**
1. コメント作成・取得・削除API実装
2. コメントコンポーネント
3. コメント入力フォーム
4. コメント数の集計と表示

**注意:** 仕様では「コメント機能は無し」と明記されているが、tag-timeline.specでコメント数が言及されている。要確認。

---

### 9. タグタイムライン機能の拡張（優先度: 低）

**仕様:** `spec/tag-timeline.spec`

**未実装項目:**
- [ ] タグの説明の表示
- [ ] タグが使われている記事の総数の表示
- [ ] タグをフォローしているユーザー数の表示

**影響範囲:**
- バックエンド: Tagエンティティへのdescription等の追加、統計情報取得API
- フロントエンド: tags/[name]/page.tsx

---

### 10. その他の細かい機能

#### 10.1 記事カードの詳細情報（優先度: 低）
**仕様:** `spec/top.spec`

**未実装項目:**
- [ ] 記事一覧での投稿日の表示
- [ ] 記事一覧でのいいね数の表示

**影響範囲:**
- フロントエンド: HomeArticleCard.tsx

---

#### 10.2 UIメッセージ（優先度: 中）
**仕様:** 複数のspecファイルで言及

**未実装項目:**
- [ ] サインイン成功/失敗のメッセージ表示
- [ ] サインアップ成功/失敗のメッセージ表示
- [ ] 記事作成成功のメッセージ表示
- [ ] 下書き保存成功のメッセージ表示
- [ ] 記事削除成功のメッセージ表示
- [ ] プロフィール更新成功のメッセージ表示

**影響範囲:**
- フロントエンド: トーストメッセージコンポーネント、各種ページ

**実装に必要な作業:**
1. トーストメッセージライブラリの導入（react-toastify等）
2. 各操作成功/失敗時のメッセージ表示

---

## 優先順位付き実装計画

### フェーズ1: 必須機能（MVP完成のため）
1. **検索機能** - ユーザー体験の基本
2. **フォロー機能** - ソーシャル機能の核
3. **通知機能** - ユーザーエンゲージメントのため
4. **ログイン要求機能** - セキュリティとUX
5. **Google OAuth認証** - ユーザー獲得の容易さ

### フェーズ2: 重要な機能
1. **ページネーション** - パフォーマンスとUX
2. **記事編集の高度な機能**（自動保存、文字数カウント等）
3. **プロフィール画像のアップロード**
4. **UIメッセージ** - UX向上
5. **パスワードリセット機能**

### フェーズ3: 将棋特有の機能
1. **棋譜機能** - プラットフォームの差別化要因
2. **盤面フォーマット挿入機能**

### フェーズ4: 追加機能・改善
1. **マイページ機能**
2. **下書き検索機能**
3. **投稿済み記事タブ**
4. **タグタイムライン拡張**
5. **コメント機能**（仕様確認が必要）

---

## 技術的負債・改善項目

### 1. テストの追加（優先度: 高）
- [ ] バックエンドのユニットテスト
- [ ] バックエンドの統合テスト
- [ ] フロントエンドのコンポーネントテスト
- [ ] E2Eテスト

### 2. CI/CDの改善（優先度: 中）
- [ ] 自動テストの実行
- [ ] 自動デプロイメント
- [ ] コードカバレッジの測定

### 3. パフォーマンス最適化（優先度: 低）
- [ ] 画像の最適化とCDN
- [ ] データベースクエリの最適化
- [ ] フロントエンドのバンドルサイズ削減

### 4. セキュリティ強化（優先度: 中）
- [ ] CSRF対策
- [ ] XSS対策の強化
- [ ] レート制限の実装
- [ ] セキュリティヘッダーの設定

### 5. 監視とログ（優先度: 中）
- [ ] エラーログの集約（Sentry等）
- [ ] アプリケーション監視
- [ ] アクセスログの分析

---

## まとめ

### 実装済み機能
- 基本的なCRUD操作（記事、ユーザー）
- 認証機能（メール/パスワード）
- いいね機能
- タグ機能
- 下書き機能

### 主な未実装機能
1. 検索機能
2. フォロー機能
3. 通知機能
4. Google OAuth認証
5. 棋譜・盤面機能
6. ページネーション
7. コメント機能

### 推定実装工数
- フェーズ1（必須機能）: 約3-4週間
- フェーズ2（重要な機能）: 約2-3週間
- フェーズ3（将棋特有の機能）: 約2-3週間
- フェーズ4（追加機能）: 約2週間

**合計:** 約9-12週間

---

## 次のステップ

1. このタスクリストを関係者でレビュー
2. 各機能の優先順位を最終決定
3. スプリント計画の作成
4. 個別のIssue/チケットの作成
5. 実装の開始

---

*このドキュメントは2026年1月16日時点の情報に基づいています。*
